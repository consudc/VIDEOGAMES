{"ast":null,"code":"var _jsxFileName = \"/Users/consudc/Documents/GitHub/PI VIDEOGAMES/PI-Videogames-main/client/src/components/VideogameCreate.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { NavLink } from \"react-router-dom\";\nimport styles from \"../components/VideogameCreate.module.css\";\nimport { createVideogames, getGenres, getPlatforms } from '../actions';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst divStyle = {\n  //backgroundImage: \"/Users/consudc/Documents/GitHub/PI VIDEOGAMES/PI-Videogames-main/client/src/GIFS/fondo5.png\",\n  backgroundSize: \"cover\",\n  position: \"fixed\",\n  backgroundPosition: \"100% 100%\",\n  width: \"100vw\",\n  height: \"100vh\"\n}; // esta function validate recibe un input (lo que escribimos dentro de cada input)\n\nfunction validate(input) {\n  let errors = {};\n\n  if (!input.name) {\n    errors.name = \"Se requiere un Nombre\";\n  } else if (!input.description) {\n    errors.description = \"Se requiere una DescripciÃ³n\";\n  } else if (!input.platforms) {\n    errors.platforms = \"Se requiere una Plataformas\";\n  } else if (!input.genres) {\n    errors.genres = \"Se requiere al menos un genero\";\n  } else if (input.rating > 5 || input.rating <= 0) {\n    errors.rating = \"Required value between 1 and 5\";\n  }\n\n  return errors;\n}\n\nfunction VideogameCreate() {\n  _s();\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const allGenres = useSelector(state => state.genres);\n  console.log(allGenres);\n  const allPlatforms = useSelector(state => state.platforms); // console.log(allPlatforms)\n\n  const platformsList = Array.from(new Set(allPlatforms.map(el => el.platforms).flatMap(x => x))); // console.log(platformsList)\n\n  const [errors, setErrors] = useState({});\n  const [input, setInput] = useState({\n    name: \"\",\n    description: \"\",\n    image: \"\",\n    rating: 0,\n    released: \"\",\n    genres: [],\n    platforms: []\n  });\n  console.log(input);\n  useEffect(() => {\n    dispatch(getGenres());\n  }, [dispatch]);\n  useEffect(() => {\n    dispatch(getPlatforms());\n  }, [dispatch]);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    if (Object.values(errors).length > 0) {\n      alert(\"Please complete the information required\");\n    } //else if (\n    //   input.name === \"\" &&\n    //   input.description === \"\" &&\n    //   input.rating === \"\"  &&\n    //   !input.platforms.length &&\n    //   !input.genres.length\n    // ) {\n    //   alert(\"Please complete the form\");}\n    else {\n      dispatch(createVideogames(input));\n      alert(\"PERSONAJE CREADO CON EXITO\");\n      setInput({\n        name: \"\",\n        description: \"\",\n        image: \"\",\n        rating: 0,\n        released: \"\",\n        genres: [],\n        platforms: []\n      });\n      setErrors({});\n      history.push(\"/home\"); //para que vuelva a la pagina anterior\n    }\n  }\n\n  function handleChange(e) {\n    e.preventDefault();\n    setInput({ ...input,\n      [e.target.name]: e.target.value\n    });\n    setErrors(validate({ ...input,\n      [e.target.name]: e.target.value\n    }));\n  }\n\n  function handleSelectGenre(e) {\n    setInput({ ...input,\n      genres: [...input.genres, e.target.value]\n    });\n  }\n\n  function handleSelectPlatform(e) {\n    setInput({ ...input,\n      platforms: [...input.platforms, e.target.value]\n    });\n  }\n\n  function handleDelete(el) {\n    setInput({ ...input,\n      genres: input.genres.filter(t => t !== el),\n      platforms: input.platforms.filter(t => t !== el)\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: divStyle,\n    children: [/*#__PURE__*/_jsxDEV(NavLink, {\n      to: \"/home\",\n      exact: true,\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: styles.btn,\n        children: \"HOME\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 3\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: styles.form,\n      onSubmit: e => handleSubmit(e),\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: styles.h1,\n        children: \" CREA TU VIDEOJUEGO\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Nombre: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 3\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: errors.name && styles.danger,\n          type: \"text\",\n          name: \"name\",\n          value: input.name,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 1\n        }, this), !errors.name ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.error,\n          children: errors.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \" Descripci\\xF3n: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 3\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: errors.description && styles.danger,\n          type: \"text\",\n          name: \"description\",\n          value: input.description,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 3\n        }, this), !errors.description ? null : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles.error,\n          children: errors.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 34\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Fecha de lanzamiento:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 3\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"released\",\n          value: input.released,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 3\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Rating:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 3\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"rating\",\n          value: input.rating,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 5\n        }, this), !errors.rating ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.error,\n          children: errors.rating\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Imagen:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 3\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"image\",\n          value: input.image,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Elige Genero/s:\", /*#__PURE__*/_jsxDEV(\"select\", {\n          onChange: handleSelectGenre,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            disabled: true,\n            className: errors.genres && styles.danger,\n            children: \"Genres\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 13\n          }, this), allGenres.map(t => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: t.name,\n            children: t.name\n          }, t.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 3\n        }, this), !errors.genres ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.error,\n          children: errors.genres\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 28\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 1\n      }, this), input.genres.map((el, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [el, /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => handleDelete(el),\n          children: \"X\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 15\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 13\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Elige Plataforma/s:\", /*#__PURE__*/_jsxDEV(\"select\", {\n          onChange: handleSelectPlatform,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Platforms\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 5\n          }, this), platformsList.map((t, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: t,\n            children: t\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 1\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 4\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 1\n      }, this), input.platforms.map((el, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [el, /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => handleDelete(el),\n          children: \"X\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 15\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 13\n      }, this)), !errors.platforms ? null : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.error,\n        children: errors.platforms\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 29\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.crear,\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          value: \"Crear\",\n          disabled: !!errors.genres || !!errors.platforms\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 4\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 1\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 3\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 151,\n    columnNumber: 5\n  }, this);\n}\n\n_s(VideogameCreate, \"fU3XM0a7+OqKfaDZUafVER0ti14=\", false, function () {\n  return [useDispatch, useHistory, useSelector, useSelector];\n});\n\n_c = VideogameCreate;\nexport default VideogameCreate;\n\nvar _c;\n\n$RefreshReg$(_c, \"VideogameCreate\");","map":{"version":3,"sources":["/Users/consudc/Documents/GitHub/PI VIDEOGAMES/PI-Videogames-main/client/src/components/VideogameCreate.js"],"names":["React","NavLink","styles","createVideogames","getGenres","getPlatforms","useDispatch","useSelector","useState","useEffect","useHistory","divStyle","backgroundSize","position","backgroundPosition","width","height","validate","input","errors","name","description","platforms","genres","rating","VideogameCreate","dispatch","history","allGenres","state","console","log","allPlatforms","platformsList","Array","from","Set","map","el","flatMap","x","setErrors","setInput","image","released","handleSubmit","e","preventDefault","Object","values","length","alert","push","handleChange","target","value","handleSelectGenre","handleSelectPlatform","handleDelete","filter","t","btn","form","h1","danger","error","id","index","crear"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {NavLink} from \"react-router-dom\";\nimport styles from \"../components/VideogameCreate.module.css\"\nimport { createVideogames,getGenres, getPlatforms } from '../actions';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nconst divStyle = {\n  \n  //backgroundImage: \"/Users/consudc/Documents/GitHub/PI VIDEOGAMES/PI-Videogames-main/client/src/GIFS/fondo5.png\",\n  backgroundSize: \"cover\",\n  position:\"fixed\",\n  backgroundPosition: \"100% 100%\",\n  width: \"100vw\",\n  height: \"100vh\",\n};\n\n\n// esta function validate recibe un input (lo que escribimos dentro de cada input)\nfunction validate (input){\n  let errors = {};\n  if (!input.name){\n    errors.name = \"Se requiere un Nombre\"\n  }\n  else if (!input.description){\n    errors.description = \"Se requiere una DescripciÃ³n\"\n  }\n  else if (!input.platforms){\n    errors.platforms = \"Se requiere una Plataformas\"\n  }\n  else if (!input.genres){\n    errors.genres = \"Se requiere al menos un genero\"\n  }\n  else if (input.rating > 5 || input.rating <= 0) {\n    errors.rating = \"Required value between 1 and 5\";}\n  return errors\n}\n\n\nfunction VideogameCreate() {\n\n  const dispatch = useDispatch()\n  const history = useHistory()\n\n\n  const allGenres = useSelector((state)=> state.genres)\n  console.log(allGenres)\n  \n  const allPlatforms = useSelector((state)=> state.platforms)\n\n  // console.log(allPlatforms)\n\nconst platformsList = Array.from (new Set((allPlatforms.map((el)=>el.platforms)).flatMap(x => x)))\n\n// console.log(platformsList)\n\n  const [errors, setErrors]= useState({})\n\n  const [input, setInput] = useState({\n    name : \"\",\n    description :\"\",\n    image: \"\",\n    rating: 0,\n    released: \"\",\n    genres: [],\n    platforms: []\n  })\nconsole.log(input)\n\n  useEffect (()=>{\n    dispatch(getGenres());\n  },[dispatch])\n\n  useEffect (()=>{\n    dispatch(getPlatforms());\n  },[dispatch])\n\n\n  function handleSubmit(e){\n    e.preventDefault()\n    if (Object.values(errors).length > 0) {\n      alert(\"Please complete the information required\");} \n      //else if (\n    //   input.name === \"\" &&\n    //   input.description === \"\" &&\n    //   input.rating === \"\"  &&\n    //   !input.platforms.length &&\n    //   !input.genres.length\n    // ) {\n    //   alert(\"Please complete the form\");}\n    else {\n      dispatch(createVideogames(input));\n    alert(\"PERSONAJE CREADO CON EXITO\")\n    setInput({\n    name : \"\",\n    description :\"\",\n    image: \"\",\n    rating: 0,\n    released: \"\",\n    genres: [],\n    platforms: []\n    })\n    setErrors({})\n    history.push(\"/home\")\n//para que vuelva a la pagina anterior\n\n    }}\n\n  function handleChange(e){\n    e.preventDefault()\n   \n    setInput({\n      ...input,\n      [e.target.name]: e.target.value\n    })\n    setErrors(validate({\n      ...input,\n      [e.target.name] : e.target.value}))\n}\n\nfunction handleSelectGenre(e){\n  setInput({\n    ...input,\n    genres: [...input.genres,e.target.value]\n\n\n  })\n}\n\nfunction handleSelectPlatform(e){\n  setInput({\n    ...input,\n    platforms: [...input.platforms, e.target.value]\n\n  })\n}\n\nfunction handleDelete(el){\n\n  setInput({\n    ...input,\n    genres : input.genres.filter((t) => t !== el),\n    platforms: input.platforms.filter((t) => t !== el)\n\n  })\n}\n\n\n  return (\n    <div style={divStyle}>\n   {/* <div className={styles.root}>  */}\n\n  <NavLink to = \"/home\" exact >\n      <button className={styles.btn}>\n        HOME\n      </button>\n  </NavLink>\n  \n\n  <form className = {styles.form}  onSubmit={(e) => handleSubmit(e)}>\n  <h1 className={styles.h1}> CREA TU VIDEOJUEGO</h1>\n\n<div>\n\n  <label>Nombre: </label>\n<input\n\nclassName={errors.name && styles.danger}\n  type= \"text\"\n  name= \"name\"\n  value={input.name}\n  onChange={handleChange}\n  />\n {!errors.name ? null : <div className={styles.error}>{errors.name}</div>}\n </div>\n<div>\n  <label> DescripciÃ³n: </label>\n  <input\n    className={errors.description && styles.danger}\n    type=\"text\"\n    name=\"description\"\n    value={input.description}\n    onChange={handleChange}\n    />\n   {!errors.description ? null : <p className={styles.error}>{errors.description}</p>}\n\n  </div>\n  <div>\n  <label>Fecha de lanzamiento:</label>\n  <input type=\"text\"\n    name=\"released\"\n    value={input.released}\n    onChange={handleChange}\n    />\n\n  </div>\n  <div>\n  <label>\n    Rating:</label>\n    <input type=\"text\"\n    name=\"rating\"\n    value={input.rating}\n    onChange={handleChange}/>\n\n{!errors.rating? null : <div className={styles.error}>{errors.rating}</div>}\n  </div>\n  <div>\n  <label>\n    Imagen:</label>\n    <input type=\"text\"\n    name=\"image\"\n    value={input.image}\n    onChange={handleChange} />\n  </div>\n\n<div>\nElige Genero/s:\n  <select onChange={handleSelectGenre}>\n            <option value=\"\" disabled={true} className={errors.genres && styles.danger}>Genres</option>\n\n            {allGenres.map((t)=>(\n              <option key={t.id} value={t.name}>{t.name}</option>\n               ))}\n  </select>\n  {!errors.genres ? null : <div className={styles.error}>{errors.genres}</div>}\n  </div>\n\n  {input.genres.map((el, index) => (\n            <div key={index}>\n              {el}\n              <button type=\"button\" onClick={() => handleDelete(el)}>X</button>\n            </div>\n          ))}\n\n\n<div>\n\nElige Plataforma/s:\n   <select onChange={handleSelectPlatform}>\n    <option value=\"\">Platforms</option>\n      {platformsList.map((t, index)=>(\n\n<option key={index} value={t}>{t}</option>\n))}\n          </select>\n</div>\n\n\n{input.platforms.map((el, index) => (\n            <div key={index}>\n              {el}\n              <button type=\"button\" onClick={() => handleDelete(el)}>X</button>\n            </div>\n          ))}\n{!errors.platforms ? null : <p className={styles.error}>{errors.platforms}</p>}\n\n<div className={styles.crear}>\n   <input type=\"submit\" value=\"Crear\" \n   disabled={!!errors.genres || !!errors.platforms}\n   ></input>\n   </div>\n  </form>\n\n\n\n</div>\n  )\n}\n\nexport default VideogameCreate"]},"metadata":{},"sourceType":"module"}